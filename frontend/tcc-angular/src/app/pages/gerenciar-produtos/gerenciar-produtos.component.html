<app-navbar></app-navbar>
<div class="page-container">
  <div class="container">
    <div class="top-bar">
      <h1>Gerenciar Produtos</h1>
      <button class="btn-sucesso"  *ngIf="!mostrarFormulario" (click)="exibirFormulario()">+ Adicionar Produto</button>
    </div>

    <div *ngIf="mostrarFormulario" class="form-container">
      <form class="form" (ngSubmit)="adicionarOuEditarProduto()" #form="ngForm">
        <div class="input-container">
          <input type="text" name="nome" [(ngModel)]="novoProduto.nome" placeholder="Nome do Produto" required />
        </div>

        <div class="input-container">
          <input type="text" name="codigo" [(ngModel)]="novoProduto.codigo" placeholder="Código" required />
        </div>

        <div class="input-container">
          <select name="caminhaoPlaca" [(ngModel)]="novoProduto.caminhaoPlaca" required>
            <option value="" disabled selected>Selecione um caminhão</option>
            <option *ngFor="let caminhao of caminhoes" [value]="caminhao.placa">
              {{ caminhao.modelo }} - {{ caminhao.placa }}
            </option>
          </select>
        </div>

        <div class="form-actions">
          <button type="submit" class="btn-sucesso" [disabled]="form.invalid">
            {{ modoEdicao ? 'Salvar Alterações' : 'Salvar' }}
          </button>
          <button type="button" class="btn-secundario" (click)="cancelar()">Cancelar</button>
        </div>
      </form>
    </div>

    <div class="tabela-container">
      <h2>Lista de Produtos</h2>
      <table class="custom-table">
        <thead>
        <tr>
          <th>Nome</th>
          <th>Código</th>
          <th>Caminhão</th>
          <th>Ações</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let produto of produtos; let i = index">
          <td>{{ produto.nome }}</td>
          <td>{{ produto.codigo }}</td>
          <td>{{ produto.caminhaoPlaca }}</td>
          <td>
            <div style="display: flex; gap: 10px">
              <button class="btn-primario" (click)="editarProduto(produto, i)">Editar</button>
              <button class="btn-danger" (click)="excluirProduto(produto)">Excluir</button>
            </div>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
<app-screen-background></app-screen-background>
