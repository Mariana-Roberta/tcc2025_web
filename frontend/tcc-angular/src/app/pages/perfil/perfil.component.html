<app-navbar></app-navbar>

<div class="page-container">
  <div class="perfil-card">

    <!-- HEADER -->
    <div class="perfil-header" *ngIf="modoAtual === 'perfil'">
      <div class="perfil-avatar">
        <i class="pi pi-user"></i>
      </div>
      <div class="perfil-info">
        <h2>{{ usuario.razaoSocial || usuario.email }}</h2>
        <p><strong>Empresa:</strong> {{ usuario.razaoSocial }}</p>
        <p><strong>Email:</strong> {{ usuario.email }}</p>
        <p><strong>Telefone:</strong> {{ usuario.telefone }}</p>
      </div>
    </div>

    <!-- VISUALIZAR PERFIL -->
    <div class="perfil-detalhes" *ngIf="modoAtual === 'perfil'">
      <h3>Dados da Conta</h3>
      <ul>
        <li><strong>CNPJ:</strong> {{ usuario.cnpj }}</li>
        <li><strong>Razão Social:</strong> {{ usuario.razaoSocial }}</li>
        <li><strong>Email:</strong> {{ usuario.email }}</li>
        <li><strong>Telefone:</strong> {{ usuario.telefone }}</li>
      </ul>
    </div>

    <!-- EDITAR PERFIL -->
    <form class="form" *ngIf="modoAtual === 'editar'" (ngSubmit)="salvarEdicao()">
      <h3>Editar Perfil</h3>

      <div class="input-container">
        <label for="razao">Razão Social</label>
        <input id="razao" type="text" placeholder="Digite sua razão social" [(ngModel)]="usuario.razaoSocial" name="razao" />
      </div>

      <div class="input-container">
        <label for="email">Email</label>
        <input id="email" type="email" placeholder="Digite seu email" [(ngModel)]="usuario.email" name="email" />
      </div>

      <div class="input-container">
        <label for="telefone">Telefone</label>
        <input id="telefone" type="text" placeholder="Digite seu telefone" [(ngModel)]="usuario.telefone" name="telefone" />
      </div>

      <div class="perfil-actions">
        <button class="btn-sucesso" type="submit">Salvar</button>
        <button class="btn-secundario" type="button" (click)="cancelar()">Cancelar</button>
      </div>
    </form>

    <!-- ALTERAR SENHA -->
    <form class="form" *ngIf="modoAtual === 'senha'" (ngSubmit)="salvarSenha()">
      <h3>Alterar Senha</h3>

      <div class="input-container">
        <label for="senhaAtual">Senha Atual</label>
        <input id="senhaAtual" type="password" placeholder="Digite sua senha atual" name="senhaAtual" />
      </div>

      <div class="input-container">
        <label for="novaSenha">Nova Senha</label>
        <input id="novaSenha" type="password" placeholder="Digite a nova senha" name="novaSenha" />
      </div>

      <div class="input-container">
        <label for="confirmaSenha">Confirmar Nova Senha</label>
        <input id="confirmaSenha" type="password" placeholder="Confirme a nova senha" name="confirmaSenha" />
      </div>

      <div class="perfil-actions">
        <button class="btn-sucesso" type="submit">Salvar Senha</button>
        <button class="btn-secundario" type="button" (click)="cancelar()">Cancelar</button>
      </div>
    </form>

    <!-- AÇÕES GERAIS -->
    <div class="perfil-actions" *ngIf="modoAtual === 'perfil'">
      <button class="btn-primario" (click)="modoAtual = 'editar'">
        <i class="pi pi-user-edit"></i> Editar Perfil
      </button>
      <button class="btn-secundario" (click)="modoAtual = 'senha'">
        <i class="pi pi-lock"></i> Alterar Senha
      </button>
      <button class="btn-danger" (click)="sairConta()">
        <i class="pi pi-sign-out"></i> Sair da Conta
      </button>
    </div>

  </div>
</div>

<app-footer></app-footer>
<app-screen-background></app-screen-background>
